<script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbwGDwPv2-6chFnJLT04zFQ1HgZyQquYLgbQcpMf7S2i1927jUnFIdQXSj7ABbDzxIg4/exec";

  document.querySelector('form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const form = e.target;

    const data = {
      action: "register",
      name: form[0].value,
      userid: form[1].value,
      password: form[2].value,
      surname: form[3].value
    };

    const formData = new FormData();
    for (const key in data) {
      formData.append(key, data[key]);
    }

    try {
      const res = await fetch(scriptURL, {
        method: "POST",
        body: formData
        // ðŸš« No headers needed â€” this avoids CORS issues
      });

      const result = await res.json();
      if (result.status === "success") {
        alert("Account created! Redirecting to login...");
        window.location.href = "signin.html";
      } else {
        alert(result.message || "Registration failed");
      }
    } catch (err) {
      alert("Error connecting to server. Please try again.");
      console.error(err);
    }
  });
</script>
